{"ast":null,"code":"var _jsxFileName = \"/home/morgan/Documents/CODE/Code test/ecommerceclothings/src/App.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { Switch, Route, BrowserRouter, Redirect } from \"react-router-dom\";\nimport \"./App.css\";\nimport Homepage from \"./screens/homepage/homepage.component\";\nimport ShopPage from \"./screens/shop/shop.component\";\nimport Header from \"./components/header/header.component\";\nimport SignUpAndSignIn from \"./screens/signin-signup/signinsignup\";\nimport CheckoutPage from \"./screens/checkout/checkout.component\";\nimport { auth, createUserProfileDocument } from \"./firebase/firebase.utils\";\n\nfunction App() {\n  const [currentUser, setCurrentUser] = useState(null);\n  const dispatch = useDispatch();\n  let unsubscribeFromAuth = null;\n  console.log(currentUser);\n  useEffect(() => {\n    unsubscribeFromAuth = auth.onAuthStateChanged(async userAuth => {\n      if (userAuth) {\n        const userRef = await createUserProfileDocument(userAuth);\n        userRef.onSnapshot(snapShot => {\n          setCurrentUser({\n            id: snapShot.id,\n            ...snapShot.data()\n          });\n          dispatch({\n            type: \"SET_CURRENT_USER\",\n            payload: userAuth\n          });\n          setCurrentUser(userAuth);\n        });\n      }\n\n      return () => {\n        unsubscribeFromAuth();\n      };\n    });\n  }, [currentUser]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(BrowserRouter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    user: currentUser,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    component: Homepage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/shop\",\n    component: ShopPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/signin\",\n    render: () => currentUser ? /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 29\n      }\n    }) : /*#__PURE__*/React.createElement(SignUpAndSignIn, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 51\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/checkout\",\n    component: CheckoutPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 11\n    }\n  }))));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/morgan/Documents/CODE/Code test/ecommerceclothings/src/App.js"],"names":["React","useState","useEffect","useDispatch","Switch","Route","BrowserRouter","Redirect","Homepage","ShopPage","Header","SignUpAndSignIn","CheckoutPage","auth","createUserProfileDocument","App","currentUser","setCurrentUser","dispatch","unsubscribeFromAuth","console","log","onAuthStateChanged","userAuth","userRef","onSnapshot","snapShot","id","data","type","payload"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { Switch, Route, BrowserRouter, Redirect } from \"react-router-dom\";\nimport \"./App.css\";\nimport Homepage from \"./screens/homepage/homepage.component\";\nimport ShopPage from \"./screens/shop/shop.component\";\nimport Header from \"./components/header/header.component\";\nimport SignUpAndSignIn from \"./screens/signin-signup/signinsignup\";\nimport CheckoutPage from \"./screens/checkout/checkout.component\";\nimport { auth, createUserProfileDocument } from \"./firebase/firebase.utils\";\n\nfunction App() {\n  const [currentUser, setCurrentUser] = useState(null);\n  const dispatch = useDispatch();\n\n  let unsubscribeFromAuth = null;\n\n  console.log(currentUser);\n  \n  useEffect(() => {\n    unsubscribeFromAuth = auth.onAuthStateChanged(async (userAuth) => {\n      if (userAuth) {\n        const userRef = await createUserProfileDocument(userAuth);\n        userRef.onSnapshot((snapShot) => {\n          setCurrentUser({\n            id: snapShot.id,\n            ...snapShot.data(),\n          });\n          dispatch({ type: \"SET_CURRENT_USER\", payload: userAuth });\n          setCurrentUser(userAuth);\n        });\n      }\n      return () => {\n        unsubscribeFromAuth();\n      };\n    });\n  }, [currentUser]);\n\n  return (\n    <div>\n      <BrowserRouter>\n        <Header  user={currentUser} />\n        <Switch>\n          <Route exact path=\"/\" component={Homepage} />\n          <Route path=\"/shop\" component={ShopPage} />\n          <Route\n            exact\n            path=\"/signin\"\n            render={() =>\n              currentUser ? <Redirect to=\"/\" /> : <SignUpAndSignIn />\n            }\n          />\n          <Route  exact path=\"/checkout\" component={CheckoutPage} />\n        </Switch>\n      </BrowserRouter>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}