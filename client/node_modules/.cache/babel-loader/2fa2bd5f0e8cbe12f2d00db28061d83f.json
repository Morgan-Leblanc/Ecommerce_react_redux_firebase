{"ast":null,"code":"var _jsxFileName = \"/home/morgan/Documents/CODE/Code test/ecommerceclothings/src/App.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Switch, Route, BrowserRouter, Redirect } from \"react-router-dom\";\nimport \"./App.css\";\nimport Homepage from \"./screens/homepage/homepage.component\";\nimport ShopPage from \"./screens/shop/shop.component\";\nimport Header from \"./components/header/header.component\";\nimport SignUpAndSignIn from \"./screens/signin-signup/signinsignup\";\nimport CheckoutPage from \"./screens/checkout/checkout.component\";\nimport { auth, createUserProfileDocument, addCollectionAndDocuments } from \"./firebase/firebase.utils\";\n\nfunction App() {\n  const [currentUser, setCurrentUser] = useState(null);\n  const collections = useSelector(state => state.shop);\n  console.log(collections);\n  const dispatch = useDispatch();\n  let unsubscribeFromAuth = null;\n  useEffect(() => {\n    unsubscribeFromAuth = auth.onAuthStateChanged(async userAuth => {\n      if (userAuth) {\n        const userRef = await createUserProfileDocument(userAuth);\n        userRef.onSnapshot(snapShot => {\n          setCurrentUser({\n            id: snapShot.id,\n            ...snapShot.data()\n          });\n          dispatch({\n            type: \"SET_CURRENT_USER\",\n            payload: userAuth\n          });\n        });\n      }\n\n      setCurrentUser(userAuth);\n      addCollectionAndDocuments(\"collections\", collections.collections);\n      return () => {\n        unsubscribeFromAuth();\n      };\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(BrowserRouter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    user: currentUser,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    component: Homepage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/shop\",\n    component: ShopPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/signin\",\n    render: () => currentUser ? /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 29\n      }\n    }) : /*#__PURE__*/React.createElement(SignUpAndSignIn, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 51\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/checkout\",\n    component: CheckoutPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 11\n    }\n  }))));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/morgan/Documents/CODE/Code test/ecommerceclothings/src/App.js"],"names":["React","useState","useEffect","useDispatch","useSelector","Switch","Route","BrowserRouter","Redirect","Homepage","ShopPage","Header","SignUpAndSignIn","CheckoutPage","auth","createUserProfileDocument","addCollectionAndDocuments","App","currentUser","setCurrentUser","collections","state","shop","console","log","dispatch","unsubscribeFromAuth","onAuthStateChanged","userAuth","userRef","onSnapshot","snapShot","id","data","type","payload"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Switch, Route, BrowserRouter, Redirect } from \"react-router-dom\";\nimport \"./App.css\";\nimport Homepage from \"./screens/homepage/homepage.component\";\nimport ShopPage from \"./screens/shop/shop.component\";\nimport Header from \"./components/header/header.component\";\nimport SignUpAndSignIn from \"./screens/signin-signup/signinsignup\";\nimport CheckoutPage from \"./screens/checkout/checkout.component\";\nimport { auth, createUserProfileDocument, addCollectionAndDocuments} from \"./firebase/firebase.utils\";\n\nfunction App() {\n  const [currentUser, setCurrentUser] = useState(null);\n  const collections = useSelector(state => state.shop )\n\n  console.log(collections);\n  \n\n  const dispatch = useDispatch();\n\n  let unsubscribeFromAuth = null;\n  \n  useEffect(() => {\n    unsubscribeFromAuth = auth.onAuthStateChanged(async (userAuth) => {\n      if (userAuth) {\n        const userRef = await createUserProfileDocument(userAuth);\n        userRef.onSnapshot((snapShot) => {\n          setCurrentUser({\n            id: snapShot.id,\n            ...snapShot.data(),\n          });\n          dispatch({ type: \"SET_CURRENT_USER\", payload: userAuth });\n        });\n      }\n      setCurrentUser(userAuth);\n      addCollectionAndDocuments(\"collections\",collections.collections)\n      return () => {\n        unsubscribeFromAuth();\n      };\n    });\n  }, []);\n\n  return (\n    <div>\n      <BrowserRouter>\n        <Header  user={currentUser} />\n        <Switch>\n          <Route exact path=\"/\" component={Homepage} />\n          <Route path=\"/shop\" component={ShopPage} />\n          <Route\n            exact\n            path=\"/signin\"\n            render={() =>\n              currentUser ? <Redirect to=\"/\" /> : <SignUpAndSignIn />\n            }\n          />\n          <Route  exact path=\"/checkout\" component={CheckoutPage} />\n        </Switch>\n      </BrowserRouter>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}